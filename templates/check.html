{% extends "base.html" %} 
{% block content %}
<section class="check-page">
  <div class="check-container">
    <div class="check-header">
      <h1>Cek Status Servis</h1>
      <p>Masukkan nomor nota untuk melihat status perbaikan perangkat Anda</p>
    </div>

    <div class="check-form-card">
      <form method="POST" action="{{ url_for('check') }}">
        <div class="form-group-check">
          <label for="nomor">
            <i class="fas fa-receipt"></i> Nomor Nota Servis
          </label>
          <input
            type="text"
            id="nomor"
            name="nomor"
            placeholder="Contoh: S001"
            required
            autocomplete="off"
          />
        </div>
        
        <button type="submit" class="btn-check">
          <i class="fas fa-search"></i>
          Cek Status
        </button>
      </form>
    </div>

    {% if hasil %}
    <div class="result-card">
      <div class="result-header">
        <h2>Detail Servis</h2>
        <span class="status-badge {{ hasil.status }}">
          {% if hasil.status == "selesai" %}
            <i class="fas fa-check-circle"></i> Selesai
          {% elif hasil.status == "sedang-dikerjakan" %}
            <i class="fas fa-tools"></i> Sedang Dikerjakan
          {% elif hasil.status == "menunggu-sparepart" %}
            <i class="fas fa-clock"></i> Menunggu Sparepart
          {% elif hasil.status == "menunggu-konfirmasi" %}
            <i class="fas fa-hourglass-half"></i> Menunggu Konfirmasi
          {% else %}
            <i class="fas fa-info-circle"></i> {{ hasil.status }}
          {% endif %}
        </span>
      </div>

      <div class="result-details">
        <div class="detail-item">
          <i class="fas fa-receipt"></i>
          <div class="detail-content">
            <h4>Nomor Nota</h4>
            <p>{{ hasil.nota }}</p>
          </div>
        </div>

        <div class="detail-item">
          <i class="fas fa-user"></i>
          <div class="detail-content">
            <h4>Nama Pelanggan</h4>
            <p>{{ hasil.nama }}</p>
          </div>
        </div>

        <div class="detail-item">
          <i class="fas fa-laptop"></i>
          <div class="detail-content">
            <h4>Jenis Perangkat</h4>
            <p>{{ hasil.perangkat }}</p>
          </div>
        </div>

        <div class="detail-item">
          <i class="fas fa-wrench"></i>
          <div class="detail-content">
            <h4>Jenis Kerusakan</h4>
            <p>{{ hasil.kerusakan }}</p>
          </div>
        </div>

        <div class="detail-item">
          <i class="fas fa-calendar-alt"></i>
          <div class="detail-content">
            <h4>Tanggal Masuk</h4>
            <p>{{ hasil.tanggal_masuk }}</p>
          </div>
        </div>

        <div class="detail-item">
          <i class="fas fa-calendar-check"></i>
          <div class="detail-content">
            <h4>Estimasi Selesai</h4>
            <p>{{ hasil.estimasi_selesai }}</p>
          </div>
        </div>
      </div>

      {% if hasil.keterangan %}
      <div class="keterangan-box">
        <h4><i class="fas fa-info-circle"></i> Keterangan</h4>
        <p>{{ hasil.keterangan }}</p>
      </div>
      {% endif %}

      <div class="result-actions">
        {% if hasil.status == "selesai" %}
        <a href="https://api.whatsapp.com/send/?phone=6281223447569&text=Halo%20AACell,%20saya%20ingin%20mengambil%20unit%20servis%20{{ hasil.nota }}&type=phone_number&app_absent=0" 
           class="btn btn-whatsapp" target="_blank">
          <i class="fab fa-whatsapp"></i>
          Konfirmasi Pengambilan
        </a>
        <a href="{{ url_for('contact') }}" class="btn btn-phone">
          <i class="fas fa-map-marker-alt"></i>
          Lihat Lokasi
        </a>
        {% else %}
        <a href="https://api.whatsapp.com/send/?phone=6281223447569&text=Halo%20AACell,%20saya%20ingin%20menanyakan%20status%20servis%20{{ hasil.nota }}&type=phone_number&app_absent=0" 
           class="btn btn-whatsapp" target="_blank">
          <i class="fab fa-whatsapp"></i>
          Tanya Status
        </a>
        <a href="tel:081223447569" class="btn btn-phone">
          <i class="fas fa-phone-alt"></i>
          Telepon
        </a>
        {% endif %}
      </div>
    </div>
    {% elif hasil is not none %}
    <div class="no-result-card">
      <i class="fas fa-search"></i>
      <h3>Data Tidak Ditemukan</h3>
      <p>Nomor nota yang Anda masukkan tidak ditemukan dalam sistem kami.</p>
      <a href="https://api.whatsapp.com/send/?phone=6281223447569&text=Halo%20AACell,%20saya%20ingin%20menanyakan%20status%20servis&type=phone_number&app_absent=0" 
         class="btn btn-whatsapp" target="_blank">
        <i class="fab fa-whatsapp"></i>
        Hubungi Kami
      </a>
    </div>
    {% endif %}

    <div class="help-section">
      <h3><i class="fas fa-life-ring"></i> Butuh Bantuan?</h3>
      <p>Jika Anda mengalami kesulitan atau memiliki pertanyaan, jangan ragu untuk menghubungi kami</p>
      <div class="help-actions">
        <a href="https://api.whatsapp.com/send/?phone=6281223447569&text=Halo%20AACell,%20saya%20butuh%20bantuan&type=phone_number&app_absent=0" 
           class="btn" target="_blank">
          <i class="fab fa-whatsapp"></i>
          Chat WhatsApp
        </a>
        <a href="tel:081223447569" class="btn">
          <i class="fas fa-phone-alt"></i>
          Telepon Kami
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
